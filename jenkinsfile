pipeline {
    agent any
    
    options {
        timeout(time: 1, unit: 'HOURS')
    }
    
    tools {
        nodejs 'NodeJS 14' // Replace with your Node.js installation name
    }
    
    // stages {
    //     stage('Checkout') {
    //         steps {
    //             checkout scm
    //             // List files to ensure package.json is present
    //             sh 'ls -l'
    //             // Show contents of package.json for debugging purposes
    //             sh 'cat package.json'
    //         }
    //     }
    // } 


    stage('Build') {
    steps {
        sh 'npm install'
        // Check if there is a build script, otherwise skip
        script {
            def packageJson = readFile('package.json')
            def pkg = new groovy.json.JsonSlurper().parseText(packageJson)
            if (pkg.scripts && pkg.scripts.build) {
                sh 'npm run build'
            } else {
                echo 'No build script defined in package.json'
            }
        }
    }
    }


    
           

}
